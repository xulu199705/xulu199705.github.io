{"title":"IC笔记之瞬态仿真","uid":"1f578846b6513ab77ee0e4b6840bbe66","slug":"ic-note-simu-tran","date":"2021-04-06T01:46:19.000Z","updated":"2022-08-18T03:03:12.220Z","comments":true,"path":"api/articles/ic-note-simu-tran.json","keywords":null,"cover":[],"content":"<p>IC笔记系列再次更新，这次介绍一下瞬态仿真。</p>\n<span id=\"more\"></span>\n<h2 id=\"概述\">1 概述</h2>\n<p>瞬态仿真是什么？</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>瞬态仿真是电路在给定的输入激励下，在设定的时间范围内计算电路时域瞬态响应性能的一种仿真手段。</p></blockquote>\n<p>瞬态仿真一般是集成电路的第一个仿真，是年轻人的第一个仿真手段；通常是验证稳定性、速度、精度等等，需要在多次不同的瞬态分析过程才能得出结论。</p>\n<h3 id=\"基本设置\">1.1 基本设置</h3>\n<p>在\"ADE\"中选择\"Analyses\"-\"Choose\"，可以选择仿真功能选择。点击\"tran\"后，可以看到如下图的基本设置界面。</p>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_1.png\" alt=\"图1-1\">\n<figcaption aria-hidden=\"true\">图1-1</figcaption>\n</figure>\n<ol type=\"1\">\n<li>\"Stop Time\"，设置仿真时间<br>\n仿真时间默认从0时刻开始，这里只设置停止时间。时间单位为可以是\"s\"（秒）、\"m\"（毫秒）和\"u\"（微秒）。</li>\n<li>\"Accuracy Defaults(errpreset)\"，设置仿真精度和速度<br>\n软件内置有三种仿真精度：\"conservative\"、\"moderate\"、\"liberal\"。\"conservative\"具有最高的精度，但速度较慢，用于高精度模拟电路和混合信号电路；\"liberal\"则是速度最快，精度较差，用于数字电路和变化率不高的模拟电路；\"moderate\"是比较折衷的模式，用于绝大多数模拟电路。如果需要更高的精度，则要在高级设置中配置参数。</li>\n<li>\"Transient Noise\"，设置瞬态噪声</li>\n<li>\"Dynamic Parameter\"，设置动态参数</li>\n<li>\"Enabled\"，设置瞬态仿真启用</li>\n</ol>\n<h3 id=\"高级设置\">1.2 高级设置</h3>\n<p>在图1-1中点击右下角的\"Options\"可进入高级设置。</p>\n<h4 id=\"time-step标签页\">1.2.1 Time Step标签页</h4>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_2_timestep.png\" alt=\"图1-2\">\n<figcaption aria-hidden=\"true\">图1-2</figcaption>\n</figure>\n<p>Simulation Interval Parameters</p>\n<ul>\n<li>\"start\"：仿真起始时刻。仿真器默认起始时间为0s。</li>\n<li>\"outputstart\"：输出波形时间。如果设计者的仿真时间较长，而只需观察某个时间点或者部分时间段内的电路瞬态特性输出，则可以通过该参数控制数据输出。</li>\n</ul>\n<p>Time Step Parameters</p>\n<ul>\n<li>\"step\"：最小的时间步长。</li>\n<li>\"maxstep\"：最大时间步长，根据\"errpreset\"中的精度设定取得默认值。</li>\n</ul>\n<h4 id=\"algorithm标签页\">1.2.2 Algorithm标签页</h4>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_2_algorithm.png\" alt=\"图1-3\">\n<figcaption aria-hidden=\"true\">图1-3</figcaption>\n</figure>\n<p>Initial Condition Parameters</p>\n<p>用户可以利用设置电路节点状态的初始化语句（ic\nstatement）或电容、电感等模型内的初始条件参数（ic\nparameters）两种方式为瞬态仿真设置初始条件。其中电容中设置的是初始电压值，电感中设置的是初始电流值。如果没有进行设置，仿真器将默认采用直流分析的结果作为初始条件。对这个参数进行设置时要格外注意，如果对电路分析不明，贸然设置电路节点的初始值，极易造成电路瞬态仿真出现收敛性问题，并产生错误结果。</p>\n<ul>\n<li>\"ic\"：设定通过何种方式设置初始条件。\n<ul>\n<li>ic=dc：忽略任何设置的初始条件，直接采用直流分析的结果。</li>\n<li>ic=node：忽略电容、电感等器件上设置的初始条件，而采用\"ic\nstatement\"设置的初始条件。</li>\n<li>ic=dev：忽略由\"ic\nstatement\"设置的初始条件，采用电容、电感上的初始条件。</li>\n<li>ic=all：两种初始条件都将被采用。当设置条件发生冲突时，\"ic\nparameters\"比\"ic statement\"的优先级更高。<br>\n&gt; \"ic statement\"的格式是ic NodeName=value。<br>\n&gt; 例：ic V1=1 M1:int_d=3.3 L1:1=10u<br>\n&gt;\n上句表示的是：在节点V1上的初始电压是1V；在MOS管M1的漏极电压是3.3V；在电感L1\n上流过的初始电流是10μA。</li>\n</ul></li>\n<li>\"skipdc\"：最小的时间步长。\n选择跳过直流分析。在没有直流分析的情况下，电路的初始解将采用通解，或是从由\"readic\"定义的文件中读取初始条件。如果\"readic\"中没有定义，则将从\"ic\nstatement\"中获取初始条件。无论是否跳过直流分析，器件上的初始条件肯定都会被采用。如果一个节点没有被赋予初始条件，将自动被仿真器设置为零。</li>\n<li>\"readic\"：从文件中读取初始条件。</li>\n</ul>\n<p>Initial Condition Parameters For Oscillator</p>\n<p>用户可以手动配置振荡器的初始条件，也可以选择使用软件自动配置。</p>\n<p>Convergence Parameters</p>\n<p>当电路在仿真时存在无限快的响应速度（如一个电路节点不存在任何电容），仿真器可能会产生收敛性问题。为了避免出现这种问题，需要设置\"cmin\"参数，给该节点设置一个合理的对地电容值。</p>\n<ul>\n<li>\"readns\"：从文件中读取电路瞬态仿真的初始解。</li>\n<li>\"cmin\"：设定每个节点对地的最小电容</li>\n</ul>\n<p>Integration Method Parameters</p>\n<p>该参数用于设计者根据仿真速度和仿真精确度选择合适的积分方式。仿真器提供3种不同的积分方式：\"backward-Euler\"，\"Trapezoidal\"，\"Second-order\nGear\"。根据这3种方式一共组合出6种模式，分别为\"euler\"、\"traponly\"、\"trap\"、\"gear2only\"、gear2\"、\"trapgear2\"。<br>\n如果设计者需要高精度仿真，可以选择\"trapezoidal\"积分方式。但是，这种积分方式对前一时刻计算产生的误差非常敏感，因此在容差很大时并不是一种很好的选择。在容差很大而且要求速度较快的情况下，通常选择\"Second-order\nGear\"积分法。\"Second-order\nGear\"积分法比\"backward-Euler\"积分法更加精确。</p>\n<p>Accuracy Parameters -\n\"relref\"：相对收敛标准的参考，默认值从\"errpreset\"得到。包括以下几个选项。<br>\n\"relref =\npointlocal\"：即relref=局部点，这个设置用来定量比较每个节点的值相对于待分析节点上当前数值的相对误差。<br>\n\"relref =\nalllocal\"：即relref=局部所有点，定量比较过去所有时间点的值相对于最大节点值的相对误差。<br>\n\"relref =\nsigglobal\"：即relref=所有信号点，定量比较每个电路上信号值相对于电路中所有信号中的最大值的相对误差。<br>\n\"relref =\nallgolbal\"：功能与sigglobal选项基本相同。另外，对每个节点最大悬浮电流值设定比较方程，此时不能满足基尔霍夫电流方程。\n- \"lteratio\"：比例系数，用于计算Newton容差中的LTE 容差。</p>\n<p>Newton Parameters</p>\n<ul>\n<li>\"maxiters\"：在每个时间步长内最多的迭代次数。</li>\n<li>\"restart\"：如果有任何条件发生变化，是否从最开始重新计算直流解。如果不重新计算，将直接采用上一次的初始值。</li>\n</ul>\n<h4 id=\"state-file标签页\">1.2.3 State File标签页</h4>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_2_statefile.png\" alt=\"图1-4\">\n<figcaption aria-hidden=\"true\">图1-4</figcaption>\n</figure>\n<p>StateFile Parameters</p>\n<p>状态文件（State File）主要有两个用处： 1.\n将保存下来的状态文件用于后续的仿真分析中。如在一次瞬态分析中保存下结束时刻的信息，在下一次瞬态分析中能够以该时刻作为起始点继续完成后续时间段的分析。\n2.\n用户能够利用状态文件自动完成初始条件的更新。设计者能够利用仿真器将一次分析的初始时刻工作点或终止时刻工作点生成状态文件。同时，设计者也能手动编写一个状态文件。</p>\n<ul>\n<li>\"write\"：将瞬态分析的初始状态解写到指定的文件中。</li>\n<li>\"writefinal\"：将瞬态分析的最终解写到指定的文件中。</li>\n</ul>\n<p>Save-Restart Parameters</p>\n<p>该参数用于配置保存和载入的频率等参数。</p>\n<h4 id=\"output标签页\">1.2.3 Output标签页</h4>\n<p><img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_2_output_1.png\" alt=\"图1-5\"> <img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_2_output_2.png\" alt=\"图1-6\"></p>\n<p>Output Parameters</p>\n<p>仿真器默认情况下会把所有仿真数据都保存下来，但有时并不需要所有的数据量。仿真器允许设计者选择保存需要的数据。如果需要得到更精确的结果，也可以增大数据输出量。<br>\n该参数配置\"compression\"输出模式，将恒定信号的重复记录删除。</p>\n<p>Strobing Parameters</p>\n<p>该参数配置\"strobing\"输出模式。在保存点之间设置一个时间间隔。虽然仿真器计算过这些数据，但是并没有将其保存输出。</p>\n<p>Final OP Point Settings</p>\n<p>该参数配置静态工作点的保存等参数。</p>\n<p>Infotimes Settings</p>\n<p>该参数配置\"infotimes\"输出模式。允许设计者保存某些自定义时刻的工作点数据。如果需要保存多个时刻的工作点，填入时间矢量之间以空格隔开。</p>\n<p>Actimes Settings</p>\n<p>未找到相关资料，待补充。</p>\n<h4 id=\"emir-output标签页\">1.2.5 EM/IR Output标签页</h4>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_2_emiroutput.png\" alt=\"图1-7\">\n<figcaption aria-hidden=\"true\">图1-7</figcaption>\n</figure>\n<p>该标签页涉及EM（电子迁移）和IR（IR压降）。<del>恕我直言，不会。</del></p>\n<h4 id=\"misc标签页\">1.2.6 Misc标签页</h4>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings_2_misc.png\" alt=\"图1-7\">\n<figcaption aria-hidden=\"true\">图1-7</figcaption>\n</figure>\n<p>该标签页为一些难以分类的配置，毕竟都写了是misc了。</p>\n<ol type=\"1\">\n<li>Annotation Parameters，注释。</li>\n<li>Captab Parameters，电容列表参数。</li>\n<li>Additional Parameters，额外参数。</li>\n</ol>\n<h2 id=\"实例\">2 实例</h2>\n<p>仿真电路如图。瞬态仿真实例选择了使用二极管连接方式的PMOS作为负载的共源极电路。</p>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/circuit_opa.png\" alt=\"图2-1\">\n<figcaption aria-hidden=\"true\">图2-1</figcaption>\n</figure>\n<h3 id=\"配置激励源\">2.1 配置激励源</h3>\n<p>与前一篇关于<a href=\"/2021/03/30/ic-note-inv-simu/\">反相器仿真</a>中对于激励信号的配置不同，这次选择直接对端口进行激励源配置。</p>\n<p>在ADE窗口中选择\"Setup\"-\"Stimuli\"。</p>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_stimuli_1.png\" alt=\"图2-2\">\n<figcaption aria-hidden=\"true\">图2-2</figcaption>\n</figure>\n<p>按照下面三张图片依次对三个端口的输入信号进行配置。</p>\n<p><img src=\"/post/ic-note-simu-tran.htm/tran_ade_stimuli_2_vin.png\" alt=\"图2-3\"> <img src=\"/post/ic-note-simu-tran.htm/tran_ade_stimuli_2_vdda.png\" alt=\"图2-4\"> <img src=\"/post/ic-note-simu-tran.htm/tran_ade_stimuli_2_gnda.png\" alt=\"图2-5\"></p>\n<h3 id=\"配置瞬态仿真\">2.2 配置瞬态仿真</h3>\n<p>选择瞬态仿真模式，并选择仿真时间和精度。</p>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_mode.png\" alt=\"图2-6\">\n<figcaption aria-hidden=\"true\">图2-6</figcaption>\n</figure>\n<p>选取观测信号后，仿真配置结束。</p>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_settings.png\" alt=\"图2-7\">\n<figcaption aria-hidden=\"true\">图2-7</figcaption>\n</figure>\n<h3 id=\"仿真结果\">2.3 仿真结果</h3>\n<p>下图是仿真结果。局部放大后，可以通过\"M\"键选取曲线上的点，对信号进行进一步分析。</p>\n<figure>\n<img src=\"/post/ic-note-simu-tran.htm/tran_ade_results.png\" alt=\"图2-8\">\n<figcaption aria-hidden=\"true\">图2-8</figcaption>\n</figure>\n<h2 id=\"总结\">总结</h2>\n<p>以上就是ADE中瞬态仿真的大部分介绍。本次笔记结束。 :@(击掌)</p>\n","text":"IC笔记系列再次更新，这次介绍一下瞬态仿真。 1 概述 瞬态仿真是什么？ 瞬态仿真是电路在给定的输入激励下，在设定的时间范围内计算电路时域瞬态响应性能的一种仿真...","link":"","photos":[],"count_time":{"symbolsCount":"4.1k","symbolsTime":"4 mins."},"categories":[{"name":"集成电路","slug":"集成电路","count":3,"path":"api/categories/集成电路.json"}],"tags":[{"name":"瞬态仿真","slug":"瞬态仿真","count":1,"path":"api/tags/瞬态仿真.json"},{"name":"仿真","slug":"仿真","count":1,"path":"api/tags/仿真.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">1 概述</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E6%9C%AC%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">1.1 基本设置</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%AB%98%E7%BA%A7%E8%AE%BE%E7%BD%AE\"><span class=\"toc-text\">1.2 高级设置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#time-step%E6%A0%87%E7%AD%BE%E9%A1%B5\"><span class=\"toc-text\">1.2.1 Time Step标签页</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#algorithm%E6%A0%87%E7%AD%BE%E9%A1%B5\"><span class=\"toc-text\">1.2.2 Algorithm标签页</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#state-file%E6%A0%87%E7%AD%BE%E9%A1%B5\"><span class=\"toc-text\">1.2.3 State File标签页</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#output%E6%A0%87%E7%AD%BE%E9%A1%B5\"><span class=\"toc-text\">1.2.3 Output标签页</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#emir-output%E6%A0%87%E7%AD%BE%E9%A1%B5\"><span class=\"toc-text\">1.2.5 EM&#x2F;IR Output标签页</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#misc%E6%A0%87%E7%AD%BE%E9%A1%B5\"><span class=\"toc-text\">1.2.6 Misc标签页</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%9E%E4%BE%8B\"><span class=\"toc-text\">2 实例</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E6%BF%80%E5%8A%B1%E6%BA%90\"><span class=\"toc-text\">2.1 配置激励源</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%85%8D%E7%BD%AE%E7%9E%AC%E6%80%81%E4%BB%BF%E7%9C%9F\"><span class=\"toc-text\">2.2 配置瞬态仿真</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%BF%E7%9C%9F%E7%BB%93%E6%9E%9C\"><span class=\"toc-text\">2.3 仿真结果</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%80%BB%E7%BB%93\"><span class=\"toc-text\">总结</span></a></li></ol>","author":{"name":"Leon","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17242727?s=60&v=4","link":"/","description":"这里是爱研究各种问题、立许多flag的Leon的网络日志","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Linux笔记之XDMCP配置","uid":"2ddaee0db5ed68210a2710804d95cdaf","slug":"linux-note-xdmcp-config","date":"2021-04-08T09:55:19.000Z","updated":"2022-08-18T03:09:01.084Z","comments":true,"path":"api/articles/linux-note-xdmcp-config.json","keywords":null,"cover":[],"text":"恰好遇到了服务器远程桌面的需求，记一篇笔记详细介绍一下XDMCP配置。 XDMCP配置主要是XDMCP Server配置、端口打开这两个部分。至于服务器上公网，...","link":"","photos":[],"count_time":{"symbolsCount":"4.4k","symbolsTime":"4 mins."},"categories":[{"name":"软件","slug":"软件","count":4,"path":"api/categories/软件.json"}],"tags":[{"name":"CentOS","slug":"CentOS","count":2,"path":"api/tags/CentOS.json"},{"name":"XDMCP","slug":"XDMCP","count":1,"path":"api/tags/XDMCP.json"},{"name":"Xmanager","slug":"Xmanager","count":1,"path":"api/tags/Xmanager.json"}],"author":{"name":"Leon","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17242727?s=60&v=4","link":"/","description":"这里是爱研究各种问题、立许多flag的Leon的网络日志","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"IC笔记之反相器仿真","uid":"c274b55517427566bb1fb55b73de09f9","slug":"ic-note-inv-simu","date":"2021-03-30T00:23:04.000Z","updated":"2022-08-18T02:43:12.314Z","comments":true,"path":"api/articles/ic-note-inv-simu.json","keywords":null,"cover":[],"text":"2021第一次更新啦！！！ 本文是基于IC618的ADE仿真操作基本介绍，以反相器为例。 接下来一段时间还会陆陆续续地更新一些IC电路的仿真。 仿真基于SMIC...","link":"","photos":[],"count_time":{"symbolsCount":"3.7k","symbolsTime":"3 mins."},"categories":[{"name":"集成电路","slug":"集成电路","count":3,"path":"api/categories/集成电路.json"}],"tags":[{"name":"IC","slug":"IC","count":1,"path":"api/tags/IC.json"},{"name":"IC618","slug":"IC618","count":1,"path":"api/tags/IC618.json"}],"author":{"name":"Leon","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/17242727?s=60&v=4","link":"/","description":"这里是爱研究各种问题、立许多flag的Leon的网络日志","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}